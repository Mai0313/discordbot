services:
  bot:
    image: ghcr.io/mai0313/discordbot:latest
    build:
      context: .
      target: prod
      dockerfile: ./docker/Dockerfile
    command:
      - uv
      - run
      - --no-dev
      - --frozen
      - discordbot
    env_file:
      - .env
    volumes:
      - ./data:/app/data
      - /mnt/share/downloaded_videos:/app/data/downloads
    network_mode: host
    restart: always
    pull_policy: always
